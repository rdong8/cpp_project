// Podman notes:
// - https://code.visualstudio.com/remote/advancedcontainers/docker-options#_podman
// - https://universal-blue.discourse.group/t/should-we-really-recommend-vscode-podman-as-supported/220/3
{
  "name": "Dev Container",
  "containerEnv": {
    // For Podman
    "HOME": "/home/dev"
  },
  //  For Podman
  "remoteUser": "dev",
  "capAdd": [
    // For C++
    "SYS_PTRACE"
  ],
  "securityOpt": [
    // For C++
    "seccomp=unconfined",
    // For Podman
    "label=disable"
  ],
  "customizations": {
    "vscode": {
      "extensions": [
        // Base extensions
        "DavidAnson.vscode-markdownlint",
        "charliermarsh.ruff",
        "cheshirekow.cmake-format",
        "cschlosser.doxdocgen",
        "denoland.vscode-deno", // Formatting for JSON, etc.
        "docker.docker",
        "eamodio.gitlens",
        "jeff-hykin.better-cpp-syntax",
        "llvm-vs-code-extensions.vscode-clangd", // Better support for C++ modules than cpptools-extension-pack
        "ms-azuretools.vscode-docker",
        "ms-python.isort",
        "ms-python.mypy-type-checker",
        "ms-python.python",
        // "ms-vscode.cpptools-extension-pack",
        "ms-vscode.cmake-tools", // Comment out if using cpptools-extension-pack
        "ms-vscode.cpptools-themes", // Comment out if using cpptools-extension-pack
        "ms-vscode.live-server", // HTML previews
        "nefrob.vscode-just-syntax",
        "tamasfe.even-better-toml",
        "usernamehw.errorlens",
        "vadimcn.vscode-lldb"
        // LLVM
        // "llvm-vs-code-extensions.vscode-mlir",
        // Rust
        // "rust-lang.rust-analyzer",
        // Python
        // "ktnrg45.vscode-cython",
        // "ms-toolsai.jupyter",
        // Kubernetes
        // "ms-kubernetes-tools.vscode-kubernetes-tools",
        // "redhat.vscode-yaml",
      ]
    }
  },
  "build": {
    "dockerfile": "Containerfile"
  },
  "runArgs": [
    // For Podman
    "--userns=keep-id"
  ]
}